(function(t){function e(e){for(var n,s,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},a={app:0},o=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([1,"chunk-vendors"]),r()})({0:function(t,e){},"02b8":function(t,e,r){"use strict";var n=r("0708"),a=r.n(n);a.a},"039a":function(t,e,r){"use strict";var n=r("0d3c"),a=r.n(n);a.a},"0708":function(t,e,r){},"0d3c":function(t,e,r){},"0ed4":function(t,e,r){"use strict";var n=r("4b5d"),a=r.n(n);a.a},1:function(t,e,r){t.exports=r("56d7")},"17ce":function(t,e,r){"use strict";var n=r("fa42"),a=r.n(n);a.a},"211a":function(t){t.exports=JSON.parse('{"s3_info":{"accessKeyId":"AKIAU6NXKEDQFXAFTYTZ","secretAccessKey":"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","region":"ap-northeast-2","bucket":"story.storyself.com"}}')},"4b5d":function(t,e,r){},"4e59":function(t){t.exports=JSON.parse('{"s3_info":{"accessKeyId":"AKIAIVOD3GWT55C4GX4A","secretAccessKey":"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","region":"ap-northeast-2","bucket":"prism-qa.day7games.com"}}')},"56d7":function(t,e,r){"use strict";r.r(e);r("e623"),r("e379"),r("5dc8"),r("37e1");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[t.isQa?r("v-app-bar",{attrs:{app:"",color:"red",tile:"",dark:"","clipped-left":"",primary:""}},[r("div",{staticClass:"d-flex align-center"},[r("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-logo-dark.png",transition:"scale-transition",width:"40"}}),t._v("주의! QA 서버 ")],1),r("v-spacer")],1):t.isLive?r("v-app-bar",{attrs:{app:"",color:"red",tile:"",dark:"","clipped-left":"",primary:""}},[r("div",{staticClass:"d-flex align-center"},[r("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-logo-dark.png",transition:"scale-transition",width:"40"}}),t._v("주의! 라이브 서버 CMS ")],1),r("v-spacer")],1):r("v-app-bar",{attrs:{app:"",color:"primary",tile:"",dark:"","clipped-left":"",primary:""}},[r("div",{staticClass:"d-flex align-center"},[r("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-logo-dark.png",transition:"scale-transition",width:"40"}}),t._v("개발 서버 CMS ")],1),r("v-spacer")],1),r("v-navigation-drawer",{attrs:{app:"",permanent:"",light:"",clipped:""}},[r("v-list-item",[t.id?r("v-list-item-content",[r("v-list-item-title",{staticClass:"title"},[t._v(t._s(t.id)+" 님!")]),r("v-list-item-subtitle",[t._v("안녕하세요")])],1):r("v-list-item-content",[r("v-list-item-title",{staticClass:"title"},[t._v("로그인 해주세요")]),r("v-list-item-subtitle")],1)],1),r("v-divider"),r("v-list",{attrs:{dense:"",nav:""}},t._l(t.items,(function(e){return r("v-list-item",{key:e.title,attrs:{to:e.path}},[r("v-list-item-icon",[r("v-icon",[t._v(t._s(e.icon))])],1),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1)],1),r("v-content",{attrs:{fluid:""}},[r("router-view",{key:t.$route.fullPath})],1)],1)},o=[],s=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),i=r("2f62"),c="manage-storykr.qpyou.cn:50000"==location.host,u="manage-storykr.qpyou.cn:8080"==location.host,l="prism-cms.day7games.com"==location.host,d={isLive:c,isQa:u,getBackendUrl:function(){return c?"http://manage-storykr.qpyou.cn:3200":u?"http://manage-storykr.qpyou.cn:3100":l?"http://prism-cms.day7games.com:3000":"http://localhost:52000"}(),getCndUrl:function(){return c||u?"http://prism-qa.day7games.com/":"http://story.storyself.com/"}()};function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var v={name:"App",components:{},computed:f({},Object(i["c"])({id:"id"}),{isQa:function(){return d.isQa},isLive:function(){return d.isLive}}),data:function(){return{items:[{path:"/story",title:"스토리 관리",icon:"mdi-view-dashboard"},{path:"/patchtemp",title:"패치 관리",icon:"mdi-view-dashboard"},{path:"/category",title:"카테고리 관리",icon:"mdi-view-dashboard"},{path:"/product",title:"상품 관리",icon:"mdi-view-dashboard"},{path:"/coupon",title:"쿠폰 관리",icon:"mdi-view-dashboard"}]}}},b=v,h=r("2877"),m=r("6544"),y=r.n(m),g=r("7496"),O=r("40dc"),_=r("a75b"),w=r("ce7e"),j=r("132d"),I=r("adda"),L=r("8860"),S=r("da13"),x=r("5d23"),P=r("34c3"),V=r("f774"),k=r("2fa4"),D=Object(h["a"])(b,a,o,!1,null,null,null),T=D.exports;y()(D,{VApp:g["a"],VAppBar:O["a"],VContent:_["a"],VDivider:w["a"],VIcon:j["a"],VImg:I["a"],VList:L["a"],VListItem:S["a"],VListItemContent:x["a"],VListItemIcon:P["a"],VListItemSubtitle:x["b"],VListItemTitle:x["c"],VNavigationDrawer:V["a"],VSpacer:k["a"]});var C=r("f309");n["a"].use(C["a"]);var E=new C["a"]({}),R=(r("d1e78"),{isAddBoard:!1,boards:[],board:{},card:{},bodyColor:"#ffffff",navbarColor:"#026aa7",isShowBoardSettings:!1,sessionId:null,id:null,CDN_URL:d.getCndUrl}),A=R,U={isAuth:function(t){return!!t.id}},F=U,N=r("bc3a"),G=r.n(N),$=r("8c4f"),B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[r("v-toolbar-title",[t._v("Login")]),r("v-spacer"),r("v-tooltip",{attrs:{bottom:""}})],1),r("v-card-text",[r("v-form",[r("v-text-field",{attrs:{label:"Login",name:"login","prepend-icon":"person",type:"text"},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}}),r("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"lock",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:t.onSignin}},[t._v("Sign in")]),r("v-btn",{attrs:{color:"primary",disabled:t.invalidForm},on:{click:t.onLogin}},[t._v("Login")])],1)],1)],1)],1),r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[t.sumbitFail?r("v-alert",{attrs:{id:"submit_fail",type:"error"}},[t._v(t._s(t.error))]):t._e()],1)],1),r("v-layout",{attrs:{"text-center":"",wrap:""}})],1)},Y=[];function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var M={name:"HelloWorld",methods:z({},Object(i["b"])(["LOGIN"]),{onLogin:function(){var t=this;this.LOGIN({userId:this.userId,password:this.password}).then((function(e){t.$router.push("story")})).catch((function(e){t.error=e,console.log(e)}))},onSignin:function(){this.$router.push("sign-in")}}),computed:{invalidForm:function(){return!this.userId||!this.password},sumbitFail:function(){return!!this.error}},created:function(){this.rPath=this.$route.query.rPath||"/"},data:function(){return{userId:"",password:"",rPath:"",error:""}}},K=M,J=(r("039a"),r("0798")),Q=r("8336"),H=r("b0af"),W=r("99d9"),Z=r("62ad"),X=r("a523"),tt=r("4bd4"),et=r("a722"),rt=r("0fd9b"),nt=r("8654"),at=r("71d9"),ot=r("2a7f"),st=r("3a2f"),it=Object(h["a"])(K,B,Y,!1,null,null,null),ct=it.exports;y()(it,{VAlert:J["a"],VBtn:Q["a"],VCard:H["a"],VCardActions:W["a"],VCardText:W["b"],VCol:Z["a"],VContainer:X["a"],VForm:tt["a"],VLayout:et["a"],VRow:rt["a"],VSpacer:k["a"],VTextField:nt["a"],VToolbar:at["a"],VToolbarTitle:ot["a"],VTooltip:st["a"]});var ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[r("v-toolbar-title",[t._v("Sign In")]),r("v-spacer"),r("v-tooltip",{attrs:{bottom:""}})],1),r("v-card-text",[r("v-form",[r("v-text-field",{attrs:{label:"user_id",name:"login","prepend-icon":"person",type:"text"},model:{value:t.user_id,callback:function(e){t.user_id=e},expression:"user_id"}}),r("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"lock",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),r("v-text-field",{attrs:{id:"password",label:"Confirm Password",name:"password","prepend-icon":"lock",type:"password"},model:{value:t.confirm_password,callback:function(e){t.confirm_password=e},expression:"confirm_password"}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",disabled:t.invalidForm},on:{click:t.onSubmit}},[t._v("Submit")])],1)],1)],1)],1),r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[t.sumbitFail?r("v-alert",{attrs:{id:"submit_fail",type:"error"}},[t._v(t._s(t.error))]):t._e()],1)],1),r("v-layout",{attrs:{"text-center":"",wrap:""}})],1)},lt=[];function dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ft={name:"HelloWorld",methods:pt({},Object(i["b"])(["REGIST"]),{onSubmit:function(){var t=this;if(this.password!=this.confirm_password)return this.error="check password!";this.REGIST({user_id:this.user_id,password:this.password}).then((function(e){t.$router.push(t.rPath)})).catch((function(e){t.error=e,console.log(e)}))}}),watch:{user_id:function(t){this.error=""},password:function(t){this.error=""},confirm_password:function(t){this.error=""}},computed:{invalidForm:function(){return!this.user_id||!this.password||!this.confirm_password},sumbitFail:function(){return!!this.error}},created:function(){this.rPath=this.$route.query.rPath||"/"},data:function(){return{user_id:"",password:"",rPath:"",error:"",confirm_password:""}}},vt=ft,bt=Object(h["a"])(vt,ut,lt,!1,null,null,null),ht=bt.exports;y()(bt,{VAlert:J["a"],VBtn:Q["a"],VCard:H["a"],VCardActions:W["a"],VCardText:W["b"],VCol:Z["a"],VContainer:X["a"],VForm:tt["a"],VLayout:et["a"],VRow:rt["a"],VSpacer:k["a"],VTextField:nt["a"],VToolbar:at["a"],VToolbarTitle:ot["a"],VTooltip:st["a"]});var mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{"text-center":"",wrap:""}},[r("v-overlay",{attrs:{value:t.updating}},[t._v(" "+t._s(t.updating)+" ")]),r("v-container",[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){return e.preventDefault(),t.createStory(e)}}},[t._v("신규 스토리 등록")]),r("v-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("TemplateStoryVue",{attrs:{"story-data":t.storyData,"is-new":!0}})],1)],1),t._l(t.storyList,(function(e,n){return r("v-card",{key:n},[r("router-link",{attrs:{to:"/story-info/"+e.storyId}},[r("v-img",{attrs:{src:t.getSrcUrl(e),width:"212px",height:"212px"}})],1),t._v(" "+t._s(e.storyId)+" ")],1)}))],2)],1)},yt=[],gt=(r("99af"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[t.isNew?r("v-card-title",[r("span",{staticClass:"headline"},[t._v("신규 스토리 등록")])]):t._e(),t.saveError?r("v-alert",{attrs:{type:"error"}},[t._v(t._s(t.saveError))]):t._e(),r("v-container",{staticClass:"grey lighten-5",attrs:{outline:""}},[r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-card",[r("v-row",[r("v-col",[t._v(" 활성화 ")]),r("v-col",[r("v-switch",{staticClass:"flag",attrs:{label:t.getStatusLabel()},model:{value:t.storyData.status,callback:function(e){t.$set(t.storyData,"status",e)},expression:"storyData.status"}})],1)],1)],1),r("v-divider"),r("v-card",[r("v-row",[r("v-col",[t._v(" 스토리 코드 ")]),r("v-col",[r("v-text-field",{ref:"inputTitle",attrs:{placeholder:"스토리 코드",disabled:!t.isNew},model:{value:t.storyData.storyId,callback:function(e){t.$set(t.storyData,"storyId",e)},expression:"storyData.storyId"}})],1)],1)],1),r("v-divider"),r("v-card",[r("v-row",[r("v-col",[t._v(" 이미지 ")]),r("v-col",[(t.thumbImg,r("img",{staticClass:"thumbImg",attrs:{src:t.thumbImg,width:"1px"}})),r("v-file-input",{attrs:{accept:"image/*",label:"File input"},on:{change:t.onThumbChange}})],1)],1)],1),r("v-divider"),r("v-card",[r("v-row",[r("v-col",[r("v-textarea",{attrs:{label:"줄거리"},model:{value:t.storyData.summary,callback:function(e){t.$set(t.storyData,"summary",e)},expression:"storyData.summary"}})],1)],1)],1),r("v-divider")],1),r("v-col",{attrs:{cols:"6"}},[r("v-card",[r("v-row",[r("v-col",[t._v(" 리소스 ")]),r("v-col",[r("AosUploadVue",{attrs:{"story-data":t.storyData}})],1)],1)],1),r("v-divider")],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.onSave}},[t._v("Save")])],1)],1)}),Ot=[],_t=(r("b0c0"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0"),r("2b3d"),r("96cf"),r("1da1")),wt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{"text-center":"",wrap:""}},[r("v-overlay",{attrs:{value:t.uploading}},[this.insertList.length?r("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:t.insertProgress,color:"primary"}},[t._v(" 신규 "+t._s(t.insertProgress)+" ")]):t._e(),this.updateList.length?r("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:t.updateProgress,color:"teal"}},[t._v(" 업데이트 "+t._s(t.updateProgress)+" ")]):t._e()],1),r("v-container",[r("v-file-input",{attrs:{multiple:"",label:"File input"},on:{change:t.onFileUpload}})],1),t.updateList.length?r("v-container",[t._v(" 업데이트 리스트 "),t._l(t.updateList,(function(e){return r("v-chip",{key:e.resourceId,attrs:{color:"blue"}},[r("v-avatar",{staticClass:"blue darken-4",attrs:{left:""}},[t._v(t._s(e.version))]),t._v(" "+t._s(e.resourceId)+" "),r("v-icon",{attrs:{right:""}},[t._v(t._s(e.vicon))])],1)}))],2):t._e(),t.insertList.length?r("v-container",[t._v(" 신규 리스트 "),t._l(t.insertList,(function(e){return r("v-chip",{key:e.resourceId,attrs:{color:"green"}},[r("v-avatar",{staticClass:"green darken-4",attrs:{left:""}},[t._v(t._s(e.version))]),t._v(" "+t._s(e.resourceId)+" "),r("v-icon",{attrs:{right:""}},[t._v(t._s(e.vicon))])],1)}))],2):t._e(),t.invalidList.length?r("v-container",[t._v(" 잘못된 파일 리스트 "),t._l(t.invalidList,(function(e){return r("v-chip",{key:e.resourceId,attrs:{color:"red"}},[t._v(" "+t._s(e.resourceId)+" "),r("v-icon",{attrs:{right:""}},[t._v(t._s(e.vicon))])],1)}))],2):t._e(),t.crcConflictList.length?r("v-container",[t._v(" crc_conflict 리스트 "),t._l(t.crcConflictList,(function(e){return r("v-chip",{key:e.resourceId,attrs:{color:"dark gray"}},[t._v(" "+t._s(e.resourceId)+" "),r("v-icon",{attrs:{right:""}},[t._v(t._s(e.vicon))])],1)}))],2):t._e(),t.updateList.length||t.insertList.length?r("v-container",[r("v-btn",{on:{click:t.uploadFile}},[t._v("업로드")])],1):t._e(),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.resourceList,search:t.search,"sort-by":"update_date"},scopedSlots:t._u([{key:"item.resourceId",fn:function(e){var n=e.item;return[r("a",{attrs:{href:"aos/"+n.url}},[t._v(t._s(n.resourceId))])]}},{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[t._v("Aos")]),r("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),r("v-text-field",{attrs:{"append-icon":"search",label:"Search","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),r("v-spacer")],1)]},proxy:!0},{key:"no-data",fn:function(){return[r("v-btn",{attrs:{color:"primary"}},[t._v("Reset")])]},proxy:!0}])})],1)],1)},jt=[],It=r("2ef0"),Lt=r.n(It);function St(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?St(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Pt=r("d2b2"),Vt=Pt.s3_upload,kt=Pt.readFileAsync,Dt=r("a141"),Tt={name:"AosUpload",data:function(){return{search:"",uploading:!1,overlay:!1,updateProgress:0,insertProgress:0,resourceList:[],arrangedResourceObject:null,arrangedResourceObjectCrc32:null,updateList:[],insertList:[],invalidList:[],crcConflictList:[],dialog:!1,headers:[{text:"아이디",value:"resourceId"},{text:"version",value:"version"},{text:"size",value:"size"},{text:"crc32",value:"crc32"},{text:"updateDate",value:"updateDate"},{text:"patchVersion",value:"patchVersion"}],editedItem:{}}},created:function(){this.storyData.storyCode&&(console.log("aosUpload: ",this.storyData),this.getList())},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(t){t||this.close()},storyData:function(){this.getList()}},props:["storyData"],methods:xt({},Object(i["b"])(["GET_AOS_RESOURCE","UPDATE_AOS_RESOURCE"]),{uploadFile:function(){var t=this;return Object(_t["a"])(regeneratorRuntime.mark((function e(){var r,n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.uploading=!0,t.updateProgress=0,t.insertProgress=0,e.t0=regeneratorRuntime.keys(t.updateList);case 4:if((e.t1=e.t0()).done){e.next=14;break}return r=e.t1.value,n=t.updateList[r],e.next=9,Vt(n.file,"aos/".concat(n.resourceId));case 9:t.updateProgress=parseInt((parseInt(r)+1)/t.updateList.length*100),n.storyId=t.storyData.storyId,delete n.file,e.next=4;break;case 14:e.t2=regeneratorRuntime.keys(t.insertList);case 15:if((e.t3=e.t2()).done){e.next=25;break}return a=e.t3.value,o=t.insertList[a],e.next=20,Vt(o.file,"aos/".concat(o.resourceId));case 20:t.insertProgress=parseInt((parseInt(a)+1)/t.insertList.length*100),o.storyId=t.storyData.storyId,delete o.file,e.next=15;break;case 25:t.UPDATE_AOS_RESOURCE({insertList:t.insertList,updateList:t.updateList,storyId:t.storyId}).then((function(){t.uploading=!1,t.getList()}));case 26:case"end":return e.stop()}}),e)})))()},getList:function(){var t=this;this.updateList=[],this.insertList=[],this.invalidList=[],this.crcConflictList=[],this.$nextTick((function(){t.GET_AOS_RESOURCE(t.storyData.storyId).then((function(e){t.resourceList=e,t.arrangedResourceObject=Lt.a.keyBy(t.resourceList,"resourceId"),t.arrangedResourceObjectCrc32=Lt.a.keyBy(t.resourceList,"crc32")}))}))},onFileUpload:function(t){var e=this;return Object(_t["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i,c,u,l,d,p,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:console.log("onFileUpload"),e.updateList=[],e.insertList=[],e.invalidList=[],e.crcConflictList=[],n=[],a=[],o=[],s=[],r.t0=regeneratorRuntime.keys(t);case 10:if((r.t1=r.t0()).done){r.next=36;break}return i=r.t1.value,c={},u=t[i],c.file=u,l=u.name,c.resourceId=l,r.next=19,kt(u);case 19:if(d=r.sent,c.crc32=Dt.crc32(d).toString(16),c.size=u.size,p=e.arrangedResourceObjectCrc32[c.crc32],!p){r.next=27;break}return c.vicon="mdi-emoticon-confused",n.push(c),r.abrupt("continue",10);case 27:if(f=e.arrangedResourceObject[c.resourceId],!f){r.next=32;break}return c.version=f.version+1,s.push(c),r.abrupt("continue",10);case 32:c.version=1,o.push(c),r.next=10;break;case 36:e.invalidList=a,e.insertList=o,e.updateList=s,e.crcConflictList=n;case 40:case"end":return r.stop()}}),r)})))()}})},Ct=Tt,Et=r("8212"),Rt=r("cc20"),At=r("8fea"),Ut=r("23a7"),Ft=r("a797"),Nt=r("490a"),Gt=Object(h["a"])(Ct,wt,jt,!1,null,null,null),$t=Gt.exports;function Bt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}y()(Gt,{VAvatar:Et["a"],VBtn:Q["a"],VChip:Rt["a"],VContainer:X["a"],VDataTable:At["a"],VDivider:w["a"],VFileInput:Ut["a"],VIcon:j["a"],VLayout:et["a"],VOverlay:Ft["a"],VProgressCircular:Nt["a"],VSpacer:k["a"],VTextField:nt["a"],VToolbar:at["a"],VToolbarTitle:ot["a"]});var qt=r("a141"),zt=r("d2b2"),Mt=zt.s3_upload,Kt=r("df9e"),Jt={props:["storyData","isNew"],data:function(){return{thumbFile:null,thumbImg:null,dialog:!1,patchInfo:"temp",saveError:""}},components:{AosUploadVue:$t},computed:Yt({},Object(i["c"])({CDN_URL:"CDN_URL"})),created:function(){this.thumbImg=this.getSrcUrl(this.storyData)},watch:{storyData:function(){this.thumbImg=this.getSrcUrl(this.storyData)}},methods:Yt({},Object(i["b"])(["CREATE_STORY","UPDATE_STORY","GET_STORY_LIST"]),{getStatusLabel:function(){return this.storyData.status?"활성":"비활성"},getSrcUrl:function(t){return t.thumb?"".concat(this.CDN_URL).concat(t.thumb):Kt},onThumbChange:function(t){var e=this;if(!t)return this.thumbImg=null,void(this.thumbFile=null);t.arrayBuffer().then((function(r){e.thumbFile=t,e.thumbFile.crc=qt.crc32(r).toString(16),e.thumbImg=URL.createObjectURL(t)}))},onSave:function(){var t=this;return Object(_t["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.storyData.storyId){e.next=4;break}return t.$nextTick((function(){return t.$refs.inputTitle.focus()})),t.saveError="스토리 코드를 입력해주세요",e.abrupt("return");case 4:t.thumbFile&&(t.storyData.thumb="images/".concat(t.patchInfo,"/").concat(t.thumbFile.name),t.storyData.crc=t.thumbFile.crc),r=t.isNew?t.CREATE_STORY:t.UPDATE_STORY,r(t.storyData).then(Object(_t["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.thumbFile){e.next=3;break}return e.next=3,Mt(t.thumbFile,"images/".concat(t.patchInfo,"/").concat(t.thumbFile.name));case 3:t.dialog=!1;case 4:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e)})))()}})},Qt=Jt,Ht=(r("02b8"),r("b73d")),Wt=r("a844"),Zt=Object(h["a"])(Qt,gt,Ot,!1,null,null,null),Xt=Zt.exports;function te(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ee(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?te(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}y()(Zt,{VAlert:J["a"],VBtn:Q["a"],VCard:H["a"],VCardActions:W["a"],VCardTitle:W["c"],VCol:Z["a"],VContainer:X["a"],VDivider:w["a"],VFileInput:Ut["a"],VRow:rt["a"],VSpacer:k["a"],VSwitch:Ht["a"],VTextField:nt["a"],VTextarea:Wt["a"]});r("a141");var re=r("d2b2"),ne=(re.s3_upload,r("df9e")),ae={data:function(){return{dialog:!1,storyList:null,updating:"",storyData:{},patchInfo:{}}},components:{TemplateStoryVue:Xt},computed:ee({},Object(i["c"])({CDN_URL:"CDN_URL"})),created:function(){var t=this;this.GET_STORY_LIST().then((function(e){t.storyList=e,t.patchInfo="patchInfo"}))},methods:ee({},Object(i["b"])(["GET_STORY_LIST"]),{getSrcUrl:function(t){return t.thumb?"".concat(this.CDN_URL).concat(t.thumb):ne},createStory:function(){this.dialog=!0,this.saveError="",this.storyData={status:0,code:"",summary:""}}})},oe=ae,se=(r("17ce"),r("169a")),ie=Object(h["a"])(oe,mt,yt,!1,null,null,null),ce=ie.exports;y()(ie,{VBtn:Q["a"],VCard:H["a"],VContainer:X["a"],VDialog:se["a"],VImg:I["a"],VLayout:et["a"],VOverlay:Ft["a"]});var ue=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{"text-center":"",wrap:""}},[r("TemplateStoryVue",{attrs:{"story-data":t.storyData,"is-new":!1}})],1)],1)},le=[];function de(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?de(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}r("a141");var fe=r("d2b2"),ve=(fe.s3_upload,r("df9e"),{data:function(){return{storyData:{}}},components:{TemplateStoryVue:Xt},computed:pe({},Object(i["c"])({CDN_URL:"CDN_URL"})),created:function(){var t=this;this.storyId=this.$route.params.storyId,this.GET_STORY_INFO(this.storyId).then((function(e){t.storyData=e}))},methods:pe({},Object(i["b"])(["GET_STORY_INFO"]))}),be=ve,he=(r("0ed4"),Object(h["a"])(be,ue,le,!1,null,null,null)),me=he.exports;y()(he,{VContainer:X["a"],VLayout:et["a"]});var ye=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v("Page not found")])},ge=[],Oe={},_e=Oe,we=Object(h["a"])(_e,ye,ge,!1,null,null,null),je=we.exports,Ie=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v("Page not found")])},Le=[],Se={},xe=Se,Pe=Object(h["a"])(xe,Ie,Le,!1,null,null,null),Ve=Pe.exports,ke=r("ad24"),De=(r("87df"),r("1bdd"));n["a"].use($["a"]),n["a"].use(ke["a"]),n["a"].component("downloadExcel",De["a"]);var Te=function(t,e,r){var n="/login?rPath=".concat(encodeURIComponent(t.path)),a=localStorage,o=a.sessionId,s=a.id;He.commit("LOGIN",{sessionId:o,id:s}||{}),He.getters.isAuth?r():r(n)},Ce=new $["a"]({mode:"history",routes:[{path:"/",component:je,beforeEnter:Te},{path:"/login",component:ct},{path:"/sign-in",component:ht},{path:"/aos_upload",component:$t,beforeEnter:Te},{path:"/story",component:ce,beforeEnter:Te},{path:"/patch",component:ce,beforeEnter:Te},{path:"/story-info/:storyId",component:me,beforeEnter:Te},{path:"*",component:Ve,beforeEnter:Te}]}),Ee=Ce,Re=401,Ae=function(){console.log("onUnauthorized"),He.commit("LOGOUT"),Ee.push("/login?rPath=".concat(encodeURIComponent(location.pathname)))},Ue=d.getBackendUrl;console.log(Ue);var Fe=function(t,e,r){return G()({method:t,url:Ue+e,data:r}).then((function(t){return t.data})).catch((function(t){var e=t.response.status,r=t.response.data,n=r.err_message;r.err_code;throw e===Re&&Ae(),n}))},Ne=function(t){G.a.defaults.headers.common["Authorization"]=t?"Bearer ".concat(t):null},Ge={login:function(t,e){return Fe("post","/auth/login",{id:t,passwd:e})},regist:function(t,e){return Fe("post","/auth/regist",{id:t,passwd:e})}},$e={create:function(t){return Fe("post","/story/create",t)},update:function(t){return Fe("post","/story/update",t)},storyList:function(){return Fe("get","/story/list")},storyInfo:function(t){return Fe("post","/story/info",{storyId:t})},resourceList:function(t){return Fe("post","/story/resourcelist",{storyId:t})},resourceUpdate:function(t){return Fe("post","/story/resourceupdate",t)}},Be={LOGIN:function(t,e){var r=t.commit,n=e.userId,a=e.password;return Ge.login(n,a).then((function(t){var e=t.sessionId,n=t.id;r("LOGIN",{sessionId:e,id:n})}))},REGIST:function(t,e){var r=e.userId,n=e.password;return Ge.signIn(r,n)},CREATE_STORY:function(t,e){return $e.create(e)},UPDATE_STORY:function(t,e){return $e.update(e)},GET_STORY_LIST:function(t){return $e.storyList()},GET_STORY_INFO:function(t,e){return $e.storyInfo(e)},GET_AOS_RESOURCE:function(t,e){return $e.resourceList(e)},UPDATE_AOS_RESOURCE:function(t,e){return $e.resourceUpdate(e)}},Ye=Be,qe={LOGIN:function(t,e){var r=e.sessionId,n=e.id;r&&(t.sessionId=r,t.id=n,localStorage.setItem("sessionId",r),localStorage.setItem("id",n),Ne(r))},LOGOUT:function(t){t.sessionId=null,t.id=null,delete localStorage.sessionId,delete localStorage.id,Ne(null)},SET_THEME:function(t,e){console.log("SET_THEME",e),t.bodyColor=e||"#ffffff",t.navbarColor=e?"rgba(0,0,0,.15)":"#026aa7"}},ze=qe;n["a"].use(i["a"]);var Me=new i["a"].Store({state:A,getters:F,mutations:ze,actions:Ye}),Ke=localStorage,Je=Ke.sessionId,Qe=Ke.id;Me.commit("LOGIN",{sessionId:Je,id:Qe}||{});var He=Me;n["a"].config.productionTip=!1,Object({NODE_ENV:"production",BASE_URL:"/"}).LOCATION=location.host,new n["a"]({vuetify:E,router:Ee,store:He,render:function(t){return t(T)}}).$mount("#app")},d2b2:function(t,e,r){r("a15b"),r("d81d"),r("d3b7"),r("ac1f"),r("6062"),r("3ca3"),r("466d"),r("ddb0"),r("96cf");var n=r("448a"),a=r("c973"),o=(r("a141"),r("4a9d")),s=r("21a6"),i=r(location.host.match(/^manage-storykr.qpyou.cn/g)?"4e59":"211a"),c=i.s3_info,u=new o.S3(c),l="ap-northeast-2";function d(t,e){return p.apply(this,arguments)}function p(){return p=a(regeneratorRuntime.mark((function t(e,r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("s3_info: ",c),n={Bucket:c.bucket,Key:r,Body:e},a=new Promise((function(t,e){u.upload(n,(function(r,n){if(r)throw e(r),r;t(),console.log("file uploaded successfully, ".concat(n.Location))}))})),t.next=5,a;case 5:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function f(t){return new Promise((function(e,r){var n=new FileReader;n.onload=function(){e(n.result)},n.onerror=r,n.readAsArrayBuffer(t)}))}function v(t,e){var r=new Blob([t],{type:"text/plain;charset=utf-8"});s(r,"".concat(e,".txt"))}function b(t,e){t=t.map((function(t){return"story/".concat(t)})),t=n(new Set(t)),v(t.join("\r\n"),e)}o.config.update({region:l}),t.exports={s3_upload:d,readFileAsync:f,exportTxt:v,exportPurgeTxt:b}},df9e:function(t,e,r){t.exports=r.p+"img/no_image.ea72798b.jpg"},fa42:function(t,e,r){}});
//# sourceMappingURL=app.3d82085c.js.map